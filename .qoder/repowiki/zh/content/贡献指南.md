# 贡献指南

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [libs/cli/README.md](file://libs/cli/README.md)
- [libs/cli/DOCS.md](file://libs/cli/DOCS.md)
- [libs/cli/pyproject.toml](file://libs/cli/pyproject.toml)
- [libs/core/pyproject.toml](file://libs/core/pyproject.toml)
- [libs/cli/langchain_cli/constants.py](file://libs/cli/langchain_cli/constants.py)
- [libs/cli/langchain_cli/utils/packages.py](file://libs/cli/langchain_cli/utils/packages.py)
- [libs/cli/langchain_cli/integration_template/pyproject.toml](file://libs/cli/langchain_cli/integration_template/pyproject.toml)
- [AGENTS.md](file://AGENTS.md)
- [CLAUDE.md](file://CLAUDE.md)
</cite>

## 目录
1. [简介](#简介)
2. [贡献类型](#贡献类型)
3. [设置本地开发环境](#设置本地开发环境)
4. [代码库结构与编码规范](#代码库结构与编码规范)
5. [创建新集成或功能](#创建新集成或功能)
6. [提交拉取请求流程](#提交拉取请求流程)
7. [参与讨论与贡献认可](#参与讨论与贡献认可)

## 简介
LangChain 是一个用于构建由大语言模型（LLM）驱动的应用程序的框架。它通过提供可互操作的组件和第三方集成，简化了人工智能应用的开发过程。作为一个开源项目，LangChain 非常欢迎社区成员的贡献，无论是新功能、基础设施改进还是文档完善。本指南旨在为希望为 LangChain 项目做出贡献的开发者提供详细的指导。

**Section sources**
- [README.md](file://README.md#L1-L78)

## 贡献类型
社区成员可以通过多种方式为 LangChain 项目做出贡献：

1.  **报告 Bug**：在使用过程中发现任何错误或意外行为，都可以在项目的 GitHub 仓库中提交 Issue 进行报告。
2.  **提出功能请求**：如果您有改进项目的想法或希望添加新功能，可以通过提交 Issue 来提出功能请求。
3.  **编写文档**：改进现有的文档、撰写新的教程或示例，帮助其他开发者更好地理解和使用 LangChain。
4.  **提交代码**：修复 Bug、实现新功能或优化现有代码。

**Section sources**
- [README.md](file://README.md#L1-L78)

## 设置本地开发环境
为了开始贡献代码，您需要设置一个本地开发环境。

### 克隆仓库
首先，将 LangChain 仓库克隆到您的本地机器：
```bash
git clone https://github.com/langchain-ai/langchain.git
cd langchain
```

### 安装依赖
本项目使用 `uv` 工具来管理依赖。请确保您已安装 `uv`，然后运行以下命令安装开发依赖：
```bash
uv sync --dev
```

### 运行测试套件
项目使用 `pytest` 作为测试框架。您可以通过以下命令运行测试套件：
```bash
pytest
```
测试分为单元测试和集成测试：
- **单元测试**：位于 `tests/unit_tests/` 目录下，不允许进行网络调用。
- **集成测试**：位于 `tests/integration_tests/` 目录下，允许进行网络调用。

**Section sources**
- [AGENTS.md](file://AGENTS.md#L59-L92)
- [CLAUDE.md](file://CLAUDE.md#L59-L92)
- [libs/cli/langchain_cli/utils/packages.py](file://libs/cli/langchain_cli/utils/packages.py#L1-L75)

## 代码库结构与编码规范
了解代码库的结构和遵循编码规范对于有效贡献至关重要。

### 代码库结构
LangChain 采用单体仓库（monorepo）结构，主要组件位于 `libs` 目录下：
- `libs/core`：包含 LangChain 的核心抽象和基础组件。
- `libs/langchain`：包含经典 LangChain 的实现。
- `libs/cli`：包含 LangChain 的官方命令行工具。
- `libs/partners`：包含与不同合作伙伴的集成。

### 编码规范
贡献代码时，必须遵循以下编码规范：
- **PEP 8**：遵循 PEP 8 代码风格指南。
- **类型提示**：所有函数都必须有完整的类型注解。
- **文档字符串**：公共函数必须使用 Google 风格的文档字符串。
- **代码质量**：确保 `make lint` 和 `make format` 命令能够通过。

**Section sources**
- [AGENTS.md](file://AGENTS.md#L59-L92)
- [CLAUDE.md](file://CLAUDE.md#L59-L92)
- [libs/cli/pyproject.toml](file://libs/cli/pyproject.toml#L0-L111)
- [libs/core/pyproject.toml](file://libs/core/pyproject.toml#L0-L136)

## 创建新集成或功能
当您需要创建一个新的集成或功能时，请确保其与现有的 API 和设计模式保持一致。

### 使用模板
对于创建新的集成包，可以使用 `langchain-cli` 提供的模板：
```bash
langchain template new my-integration
```
该命令会基于 `integration_template` 创建一个新的集成项目。

### 一致性
新功能应遵循 LangChain 的核心设计原则，如模块化和可组合性。确保您的代码与现有组件的接口兼容。

**Section sources**
- [libs/cli/DOCS.md](file://libs/cli/DOCS.md#L0-L189)
- [libs/cli/langchain_cli/integration_template/pyproject.toml](file://libs/cli/langchain_cli/integration_template/pyproject.toml#L0-L50)

## 提交拉取请求流程
在提交拉取请求（Pull Request）之前，请确保完成以下检查：

- [ ] **无破坏性变更**：验证没有公共 API 的变更。
- [ ] **类型提示**：所有函数都有完整的类型注解。
- [ ] **测试**：新功能已通过单元测试完全覆盖。
- [ ] **安全性**：代码中没有危险的模式（如 `eval`、静默失败等）。
- [ ] **文档**：公共函数有 Google 风格的文档字符串。
- [ ] **代码质量**：`make lint` 和 `make format` 命令通过。
- [ ] **架构**：在适用的情况下提出了改进建议。
- [ ] **提交信息**：遵循 Conventional Commits 格式。

提交 PR 后，维护者将进行代码审查。请耐心等待反馈，并根据反馈进行修改。

**Section sources**
- [AGENTS.md](file://AGENTS.md#L316-L326)
- [CLAUDE.md](file://CLAUDE.md#L316-L326)

## 参与讨论与贡献认可
我们鼓励贡献者积极参与社区讨论。您可以在 [LangChain 论坛](https://forum.langchain.com) 上提出技术问题、分享想法和反馈。我们非常感谢每一位贡献者，并会在发布说明中对重大贡献进行致谢。

**Section sources**
- [README.md](file://README.md#L1-L78)